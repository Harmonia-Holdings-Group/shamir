(this.webpackJsonpui=this.webpackJsonpui||[]).push([[0],[,,,,,,,,,,function(e,t,s){"use strict";(function(e){var n=s(0),i=s(11),a=s(3),r=s(4),l=s(2),c=s(6),h=s(5),o=s(1),d=s.n(o),p=(s(18),function(t){Object(c.a)(o,t);var s=Object(h.a)(o);function o(e){var t;return Object(a.a)(this,o),(t=s.call(this,e)).state={keyShares:3,keyThreshold:2,encryptionPassword:"",error:"",fileName:"Select file to encrypt",genKey:"",showResult:!1,cipherContent:"",cipherBlob:new Blob,showAllCipher:!1,generatedKeys:[],generatedKeysConcat:new Blob},t.handleInputChange=t.handleInputChange.bind(Object(l.a)(t)),t.handleEncryptRequest=t.handleEncryptRequest.bind(Object(l.a)(t)),t.handleFileSelection=t.handleFileSelection.bind(Object(l.a)(t)),t.fileInput=d.a.createRef(),t}return Object(r.a)(o,[{key:"handleInputChange",value:function(e){var t=e.target,s=t.value,n=t.name;this.setState(Object(i.a)({},n,s))}},{key:"handleEncryptRequest",value:function(t){if(1===this.fileInput.current.files.length)if(parseInt(this.state.keyShares)<3)this.setState({error:"key shares value must be at least 3"});else if(parseInt(this.state.keyThreshold)<2||parseInt(this.state.keyThreshold)>parseInt(this.state.keyShares))this.setState({error:"keys threshold value must be between 2 and the number of key shares."});else if(""!==this.state.encryptionPassword){this.setState({error:""});var s=new FileReader;s.onload=function(t){var s=t.target.result,n=new Uint8Array(s),i=e.GoEncrypt(this.state.encryptionPassword,n);if(2===i.length){for(var a=atob(i[1]),r=new Uint8Array(a.length),l=0;l<a.length;l++)r[l]=a.charCodeAt(l);console.log("ENCRYPTED BYTES: ".concat(r));var c=new Blob([r]),h=e.GoGenKeys(i[0],parseInt(this.state.keyThreshold),parseInt(this.state.keyShares));this.setState({generatedKeys:h,generatedKeysConcat:new Blob([h.join("\n")],{type:"text/plain"}),genKey:i[0],cipherContent:i[1],showResult:!0,cipherBlob:c})}else this.setState({error:"(unexpected) ".concat(i)})},s.onload=s.onload.bind(this),s.readAsArrayBuffer(this.fileInput.current.files[0])}else this.setState({error:"encryption password must not be empty!"});else this.setState({error:"you must select exactly 1 file to encrypt!"})}},{key:"handleFileSelection",value:function(e){if(1===this.fileInput.current.files.length){var t=this.fileInput.current.files[0].name;this.setState({fileName:t})}else this.setState({error:"you must select exactly 1 file to encrypt!"})}},{key:"render",value:function(){var e=this;return this.props.show?Object(n.jsxs)("div",{id:"encryption-section",children:[Object(n.jsxs)("section",{className:"container",id:"encryption-input",children:[Object(n.jsxs)("div",{className:"file-input",children:[Object(n.jsx)("input",{type:"file",id:"file-input",ref:this.fileInput,onChange:this.handleFileSelection}),Object(n.jsxs)("label",{htmlFor:"file-input",children:[Object(n.jsx)("i",{className:"fas fa-file"}),Object(n.jsx)("span",{children:this.state.fileName})]})]}),Object(n.jsxs)("div",{className:"input-group",children:[Object(n.jsx)("p",{className:"accent",children:"Key shares"}),Object(n.jsx)("input",{type:"number",min:"3",placeholder:"Key shares",id:"key-shares-input",name:"keyShares",value:this.state.keyShares,onChange:this.handleInputChange}),Object(n.jsx)("label",{htmlFor:"key-shares-input",children:"Number of keys to generate after encryption. Min: 3"})]}),Object(n.jsxs)("div",{className:"input-group",children:[Object(n.jsx)("p",{className:"accent",children:"Keys threshold"}),Object(n.jsx)("input",{type:"number",placeholder:"Key threshold",id:"key-threshold-input",name:"keyThreshold",min:"2",value:this.state.keyThreshold,onChange:this.handleInputChange}),Object(n.jsx)("label",{htmlFor:"key-threshold-input",children:"Minimum number of keys required to decrypt the file, must bet least 2, and at most the number of key shares."})]}),Object(n.jsxs)("div",{className:"input-group",children:[Object(n.jsx)("p",{className:"accent",children:"Encryption password"}),Object(n.jsx)("input",{type:"password",placeholder:"Enter a master password",id:"encryption-password",name:"encryptionPassword",value:this.state.encryptionPassword,onChange:this.handleInputChange}),Object(n.jsx)("label",{htmlFor:"encryption-password",children:"Master password to encrypt the file."})]}),Object(n.jsx)("div",{className:"button",children:Object(n.jsxs)("button",{onClick:this.handleEncryptRequest,id:"encrypt-button",children:["Encrypt ",Object(n.jsx)("i",{className:"fas fa-play"})]})}),Object(n.jsxs)("p",{style:{display:""!==this.state.error?"block":"none"},className:"error-message",children:[Object(n.jsx)("span",{children:"Error"}),": ",this.state.error]})]}),Object(n.jsxs)("section",{className:"container",id:"encryption-keys",children:[Object(n.jsxs)("p",{className:"subsection-title",children:["Keys ",Object(n.jsx)("i",{className:"fas fa-copy"})]}),Object(n.jsxs)("p",{className:"small",style:{display:this.state.showResult?"":"none"},children:["Derived master key:",Object(n.jsx)("span",{children:this.state.genKey})]}),Object(n.jsx)("p",{style:{display:this.state.showResult?"":"none"},children:Object(n.jsxs)("a",{href:window.URL.createObjectURL(this.state.generatedKeysConcat),download:"keys.txt",children:["Save file ",Object(n.jsx)("i",{className:"fas fa-file-download"})]})}),Object(n.jsxs)("div",{className:"keys",children:[Object(n.jsx)("p",{className:"encoded",style:{display:this.state.showResult?"none":""},children:"Waiting for input..."}),Object(n.jsx)("p",{className:"encoded",style:{display:this.state.showResult?"":"none"},children:this.state.generatedKeys.map((function(e){return Object(n.jsx)("span",{children:e},e)}))})]})]}),Object(n.jsxs)("section",{className:"container",id:"encrypted-file",children:[Object(n.jsxs)("p",{className:"subsection-title",children:["Encrypted file ",Object(n.jsx)("i",{className:"fas fa-copy"})]}),Object(n.jsx)("p",{style:{display:this.state.showResult?"":"none"},children:Object(n.jsxs)("a",{href:window.URL.createObjectURL(this.state.cipherBlob),download:"".concat(this.state.fileName,".aes"),children:["Save file ",Object(n.jsx)("i",{className:"fas fa-file-download"})]})}),Object(n.jsx)("p",{className:"small",children:"Base64 encoded:"}),Object(n.jsx)("p",{className:"encoded",style:{display:this.state.showResult?"none":""},children:"Waiting for input..."}),Object(n.jsxs)("div",{className:"encoded",style:{display:this.state.showResult?"":"none"},children:[Object(n.jsx)("p",{style:{display:this.state.cipherContent.length>=500&&this.state.showAllCipher?"block":"none"},children:Object(n.jsx)("button",{onClick:function(){e.setState({showAllCipher:!1})},children:"... hide"})}),this.state.showAllCipher?this.state.cipherContent:this.state.cipherContent.substr(0,500),Object(n.jsxs)("p",{style:{display:this.state.cipherContent.length>=500&&!this.state.showAllCipher?"block":"none"},children:[this.state.cipherContent.substr(0,500),Object(n.jsx)("button",{onClick:function(){e.setState({showAllCipher:!0})},children:"... show all"})]})]})]})]}):null}}]),o}(d.a.Component));t.a=p}).call(this,s(8))},,function(e,t,s){"use strict";(function(e){var n=s(0),i=s(3),a=s(4),r=s(2),l=s(6),c=s(5),h=s(1),o=s.n(h),d=(s(19),function(t){Object(l.a)(h,t);var s=Object(c.a)(h);function h(e){var t;return Object(i.a)(this,h),(t=s.call(this,e)).state={keysFileName:"Select keys file",encryptedFileName:"Select encrypted file",keys:[],showParsedKeys:!1,encryptedContent:new Blob,error:"",showResult:!1,showAllDecrypted:!1,plainContentURL:"",derivedKey:"",decryptedFileName:""},t.handleDecryptRequest=t.handleDecryptRequest.bind(Object(r.a)(t)),t.handleKeysFileSelection=t.handleKeysFileSelection.bind(Object(r.a)(t)),t.handleEncryptedFileSelection=t.handleEncryptedFileSelection.bind(Object(r.a)(t)),t.keysFileInput=o.a.createRef(),t.encryptedFileInput=o.a.createRef(),t}return Object(a.a)(h,[{key:"handleKeysFileSelection",value:function(e){if(1===this.keysFileInput.current.files.length){var t=this.keysFileInput.current.files[0].name;this.setState({keysFileName:t});var s=new FileReader;s.onload=function(e){this.setState({keys:e.target.result.split("\n").filter((function(e){return e.length>0})),showParsedKeys:!0})},s.onerror=function(e){this.setState({error:"Failed reading keys file </3"})},s.onload=s.onload.bind(this),s.onerror=s.onerror.bind(this),s.readAsText(this.keysFileInput.current.files[0],"UTF-8")}else this.setState({error:"you must select exactly 1 file to encrypt!"})}},{key:"handleEncryptedFileSelection",value:function(e){if(1===this.encryptedFileInput.current.files.length){var t=this.encryptedFileInput.current.files[0].name;this.setState({encryptedFileName:t});var s=new FileReader;s.onload=function(e){var t=e.target.result,s=new Uint8Array(t);this.setState({encryptedContent:s})},s.onerror=function(e){this.setState({error:"Failed reading encrypted file </3"})},s.onload=s.onload.bind(this),s.onerror=s.onerror.bind(this),s.readAsArrayBuffer(this.encryptedFileInput.current.files[0],"UTF-8")}else this.setState({error:"you must select exactly 1 file to encrypt!"})}},{key:"handleDecryptRequest",value:function(t){if(this.state.keys.length<2)this.setState({error:"obtained less than 2 keys from keys input"});else if(0!==this.state.encryptedContent.length){var s=e.GoGetKeyFromKeyShares(this.state.keys);if("string"===typeof s&&s.startsWith("ERROR"))this.setState({error:s});else{var n=e.GoDecrypt(s,this.state.encryptedContent);if("string"===typeof n&&n.startsWith("ERROR"))this.setState({error:n});else{for(var i,a,r=atob(n),l=new Uint8Array(r.length),c=0;c<r.length;c++)l[c]=r.charCodeAt(c);this.state.encryptedFileName.endsWith(".aes")?this.setState({decryptedFileName:this.state.encryptedFileName.substr(0,this.state.encryptedFileName.length-4)}):this.setState({decryptedFileName:this.state.encryptedFileName}),i=new Blob([l]),a=window.URL.createObjectURL(i),this.setState({error:"",derivedKey:s,showResult:!0,plainContentURL:a})}}}else this.setState({error:"please select an encrypted file"})}},{key:"render",value:function(){return this.props.show?Object(n.jsxs)("div",{id:"encryption-section",children:[Object(n.jsxs)("div",{className:"container",id:"decryption-input",children:[Object(n.jsxs)("div",{className:"input-group",children:[Object(n.jsx)("p",{className:"accent",children:"Keys"}),Object(n.jsx)("label",{children:"A text file containing the decryption keys, each one on a new line."}),Object(n.jsxs)("div",{className:"file-input",children:[Object(n.jsx)("input",{type:"file",id:"file-input",ref:this.keysFileInput,onChange:this.handleKeysFileSelection}),Object(n.jsxs)("label",{htmlFor:"file-input",children:[Object(n.jsx)("i",{className:"fas fa-file"}),Object(n.jsxs)("span",{children:[this.state.keysFileName," "]})]})]}),Object(n.jsx)("p",{className:"encoded",style:{display:this.state.showParsedKeys?"":"none"},children:this.state.keys.map((function(e){return Object(n.jsx)("span",{children:e},e)}))})]}),Object(n.jsxs)("div",{className:"input-group",children:[Object(n.jsx)("p",{className:"accent",children:"Encrypted file"}),Object(n.jsx)("label",{children:"Encrytped file"}),Object(n.jsxs)("div",{className:"file-input",children:[Object(n.jsx)("input",{type:"file",id:"efile-input",ref:this.encryptedFileInput,onChange:this.handleEncryptedFileSelection}),Object(n.jsxs)("label",{htmlFor:"efile-input",children:[Object(n.jsx)("i",{className:"fas fa-file"}),Object(n.jsxs)("span",{children:[this.state.encryptedFileName," "]})]})]})]}),Object(n.jsx)("div",{className:"button",children:Object(n.jsxs)("button",{onClick:this.handleDecryptRequest,children:["Decrypt ",Object(n.jsx)("i",{className:"fas fa-play"})]})}),Object(n.jsxs)("p",{style:{display:""!==this.state.error?"block":"none"},className:"error-message",children:[Object(n.jsx)("span",{children:"Error"}),": ",this.state.error]})]}),Object(n.jsxs)("section",{className:"container",id:"encrypted-file",children:[Object(n.jsxs)("p",{className:"subsection-title",children:["Decrypted file ",Object(n.jsx)("i",{className:"fas fa-copy"})]}),Object(n.jsxs)("p",{className:"small",style:{display:this.state.showResult?"":"none"},children:["Derived master key:",Object(n.jsx)("span",{children:this.state.derivedKey})]}),Object(n.jsx)("p",{style:{display:this.state.showResult?"":"none"},children:Object(n.jsxs)("a",{href:this.state.plainContentURL,download:this.state.decryptedFileName,children:["Save file ",Object(n.jsx)("i",{className:"fas fa-file-download"})]})})]})]}):null}}]),h}(o.a.Component));t.a=d}).call(this,s(8))},,,,,,function(e,t,s){},function(e,t,s){},function(e,t,s){},function(e,t,s){},function(e,t,s){"use strict";s.r(t);var n=s(0),i=s(1),a=s.n(i),r=s(9),l=s.n(r),c=s(3),h=s(4),o=s(6),d=s(5),p=s(10),y=s(12),j=(s(20),function(e){Object(o.a)(s,e);var t=Object(d.a)(s);function s(e){var n;return Object(c.a)(this,s),(n=t.call(this,e)).state={usage:"encrypt"},n}return Object(h.a)(s,[{key:"render",value:function(){var e=this;return Object(n.jsxs)("div",{className:"root-container",children:[Object(n.jsxs)("nav",{children:[Object(n.jsx)("div",{children:Object(n.jsx)("p",{onClick:function(){e.setState({usage:"encrypt"})},className:"encrypt"===this.state.usage?"active":"",children:"Encrypt"})}),Object(n.jsx)("div",{children:Object(n.jsx)("p",{onClick:function(){e.setState({usage:"decrypt"})},className:"decrypt"===this.state.usage?"active":"",children:"Decrypt"})})]}),Object(n.jsx)(p.a,{show:"encrypt"===this.state.usage}),Object(n.jsx)(y.a,{show:"decrypt"===this.state.usage})]})}}]),s}(a.a.Component));s(21);l.a.render(Object(n.jsx)(a.a.StrictMode,{children:Object(n.jsx)(j,{})}),document.getElementById("root"))}],[[22,1,2]]]);
//# sourceMappingURL=main.969dd8c5.chunk.js.map